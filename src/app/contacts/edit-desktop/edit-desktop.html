@if(getShowEditContact()){
<div class="modal-backdrop" (click)="onClose()">
  <div class="modal-container" [class.sliding-out]="isClosing" (click)="$event.stopPropagation()">
    <!-- Left Side - Frame 194 (Dark Blue) -->
    <div class="left-side">
      <div class="logo">
        <img src="assets/img/contacts/edit-desktop/join-bright.svg" alt="Join Logo">
      </div>

      <div class="title-container">
        <h1 class="title">Edit contact</h1>
        <!-- Vector 5 - Blue underline -->
        <div class="title-underline"></div>
      </div>
    </div>

    <!-- Right Side - Light Overlay -->
    <div class="right-side">
      <button class="close-btn" (click)="onClose()">
        <img src="assets/img/contacts/edit-desktop/x-vector-icon-only.svg" alt="cancel">
      </button>

      <div class="avatar" [style.background]="editedContact.color">
        <span class="initials">{{ editedContact.name.substring(0, 1).toUpperCase() + editedContact.surname.substring(0,
          1).toUpperCase() }}</span>
      </div>

      <form class="contact-form" #f="ngForm" novalidate>
        <div class="form-field">
          <div class="input-group">
            <input type="text" [(ngModel)]="editedContact.name" name="name" placeholder="Name" required
              #nameInput="ngModel" [class.invalid]="nameInput.invalid && nameInput.touched" />
            <img src="assets/img/contacts/edit-desktop/person-icon-only.svg" alt="Name Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (nameInput.invalid && nameInput.touched) {
            @if (nameInput.errors?.['required']) {
            <span>Name ist ein Pflichtfeld.</span>
            }
            } @else if (nameInput.touched && hasInvalidCapitalization(editedContact.name)) {
            <span>Der erste Buchstabe muss groß geschrieben werden.</span>
            }
          </div>
        </div>

        <div class="form-field">
          <div class="input-group">
            <input type="text" [(ngModel)]="editedContact.surname" name="surname" placeholder="Surname" required
              #surnameInput="ngModel" [class.invalid]="surnameInput.invalid && surnameInput.touched" />
            <img src="assets/img/contacts/edit-desktop/person-icon-only.svg" alt="Surname Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (surnameInput.invalid && surnameInput.touched) {
            @if (surnameInput.errors?.['required']) {
            <span>Nachname ist ein Pflichtfeld.</span>
            }
            } @else if (surnameInput.touched && hasInvalidCapitalization(editedContact.surname)) {
            <span>Der erste Buchstabe muss groß geschrieben werden.</span>
            }
          </div>
        </div>

        <div class="form-field">
          <div class="input-group">
            <input type="email" [(ngModel)]="editedContact.email" name="email" placeholder="Email" required email
              #emailInput="ngModel" [class.invalid]="emailInput.invalid && emailInput.touched" />
            <img src="assets/img/contacts/edit-desktop/mail-icon-only.svg" alt="Email Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (emailInput.invalid && emailInput.touched) {
            @if (emailInput.errors?.['required']) {
            <span>Email ist ein Pflichtfeld.</span>
            } @else if (emailInput.errors?.['email']) {
            <span>Bitte geben Sie eine gültige Email-Adresse ein.</span>
            }
            } @else if (emailInput.touched && hasInvalidEmailFormat(editedContact.email)) {
            <span>Email muss das Format name@domain.endung haben.</span>
            }
          </div>
        </div>

        <div class="form-field">
          <div class="input-group">
            <input type="tel" [(ngModel)]="editedContact.phone" name="phone" placeholder="Phone" #phoneInput="ngModel"
              [class.invalid]="(phoneInput.invalid && phoneInput.touched) || (phoneInput.touched && hasInvalidPhoneFormat(editedContact.phone))" />
            <img src="assets/img/contacts/edit-desktop/call-icon-only.svg" alt="Phone Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (phoneInput.touched && hasInvalidPhoneFormat(editedContact.phone)) {
            <span>Telefonnummer muss mind. 6 Ziffern lang sein.</span>
            }
          </div>
        </div>

        <div class="button-group">
          <button type="button" class="btn-delete" (click)="delContact()">
            Delete
          </button>
          <button type="button" class="btn-save" (click)="upContact()" [disabled]="!isFormValid(f)">
            Save
            <img src="assets/img/contacts/edit-desktop/check-icon-only.svg" alt="Save Icon" class="button-icon">
          </button>
        </div>
      </form>
    </div>

  </div>
</div>
}