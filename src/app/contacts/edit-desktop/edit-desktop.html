@if(getShowEditContact()){
<div class="overlay" (click)="onOverlayClick($event)">
  <div class="add-container" [class.sliding-out]="isClosing">
    <!-- Close Button (Top Right) -->
    <button class="close-btn" (click)="onClose()" type="button" aria-label="Close">
      <div class="vorHover">
        <img src="assets/img/contacts/add-desktop/x-vector-icon-only.svg" alt="Join Logo">
      </div>
    </button>

    <!-- Left Side: Title Section -->
    <div class="left-section">
      <div class="logo" aria-hidden="true">
        <img src="assets/img/contacts/add-desktop/join-bright.svg" alt="">
      </div>
      <h1>Edit contact</h1>
      <div class="blue-line"></div>
    </div>

    <!-- Right Side: Form Section -->
    <div class="right-section">
      <!-- Avatar Circle -->
      <div class="avatar-circle" [style.background]="editedContact.color" aria-hidden="true">
        <span class="initials">{{ editedContact.name.substring(0, 1).toUpperCase() + editedContact.surname.substring(0,
          1).toUpperCase() }}</span>
      </div>

      <!-- Form -->
      <form (ngSubmit)="upContact()" #f="ngForm" class="contact-form" novalidate>
        <!-- Name Input with Validation -->
        <div class="form-field">
          <div class="input-wrapper">
            <input type="text" id="name" [(ngModel)]="editedContact.name" name="name" placeholder="Name" required
              autocomplete="name" #nameInput="ngModel" [class.invalid]="nameInput.invalid && nameInput.touched">
            <img src="assets/img/contacts/add-desktop/person-icon-only.svg" alt="Name Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (nameInput.invalid && nameInput.touched) {
            @if (nameInput.errors?.['required']) {
            <span>Name is a required field.</span>
            }
            } @else if (nameInput.touched && hasInvalidCapitalization(editedContact.name)) {
            <span>The first letter must be capitalized.</span>
            }
          </div>
        </div>

        <!-- Surname Input with Validation -->
        <div class="form-field">
          <div class="input-wrapper">
            <input type="text" id="surname" [(ngModel)]="editedContact.surname" name="surname" placeholder="Surname"
              required autocomplete="family-name" #surnameInput="ngModel"
              [class.invalid]="surnameInput.invalid && surnameInput.touched">
            <img src="assets/img/contacts/add-desktop/person-icon-only.svg" alt="Surname Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (surnameInput.invalid && surnameInput.touched) {
            @if (surnameInput.errors?.['required']) {
            <span>Last name is a required field.</span>
            }
            } @else if (surnameInput.touched && hasInvalidCapitalization(editedContact.surname)) {
            <span>The first letter must be capitalized.</span>
            }
          </div>
        </div>

        <!-- Email Input with Validation -->
        <div class="form-field">
          <div class="input-wrapper">
            <input type="email" id="email" [(ngModel)]="editedContact.email" name="email" placeholder="Email" required
              email autocomplete="email" #emailInput="ngModel"
              [class.invalid]="emailInput.invalid && emailInput.touched">
            <img src="assets/img/contacts/add-desktop/mail-icon-only.svg" alt="Email Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (emailInput.invalid && emailInput.touched) {
            @if (emailInput.errors?.['required']) {
            <span>Email ist ein Pflichtfeld.</span>
            } @else if (emailInput.errors?.['email']) {
            <span>Please enter a valid email address.</span>
            }
            } @else if (emailInput.touched && hasInvalidEmailFormat(editedContact.email)) {
            <span>Email must be in the format name@domain.extension.</span>
            }
          </div>
        </div>

        <!-- Phone Input with Validation -->
        <div class="form-field">
          <div class="input-wrapper">
            <input type="tel" id="phone" [(ngModel)]="editedContact.phone" name="phone" placeholder="Phone"
              autocomplete="tel" #phoneInput="ngModel"
              [class.invalid]="(phoneInput.invalid && phoneInput.touched) || (phoneInput.touched && hasInvalidPhoneFormat(editedContact.phone))">
            <img src="assets/img/contacts/add-desktop/call-icon-only.svg" alt="Phone Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (phoneInput.touched && hasInvalidPhoneFormat(editedContact.phone)) {
            <span>The phone number must be at least 6 digits long.</span>
            }
          </div>
        </div>

        <!-- Buttons -->
        <div class="button-group">
          <button type="button" class="btn-cancel" (click)="delContact()">
            Delete
            <div class="input-icon">
              <img class="hoverOff" src="assets/img/contacts/add-desktop/x-vector-icon-only.svg" alt="Cancel Icon">
              <img class="hoverOn" src="assets/img/contacts/add-desktop/x-vector-blue-icon-only.svg" alt="Cancel Icon">
            </div>
          </button>

          <button type="submit" class="btn-create" [disabled]="!isFormValid(f)">
            Save
            <img src="assets/img/contacts/add-desktop/check-icon-only.svg" alt="Save Icon" class="input-icon">
          </button>
        </div>
      </form>
    </div>

  </div>
</div>
}